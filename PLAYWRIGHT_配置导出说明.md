# ğŸ­ Playwright é…ç½®å¯¼å‡ºåŠŸèƒ½è¯´æ˜

## âœ¨ åŠŸèƒ½ç®€ä»‹

è¿™ä¸ªåŠŸèƒ½å¯ä»¥å°†æ’ä»¶æµ‹è¯•æˆåŠŸçš„ç½‘ç«™ç»“æ„é…ç½®**ä¸€é”®å¯¼å‡ºä¸º JSON**ï¼Œç›´æ¥ç”¨äºåç«¯ Playwright è„šæœ¬å¼€å‘ï¼Œå¤§å¤§æå‡å¼€å‘æ•ˆç‡ï¼

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### **å…¸å‹å·¥ä½œæµç¨‹**

```
1. å‘ç°æ–°ç½‘ç«™ 
   â†“
2. ç”¨æ’ä»¶å¿«é€Ÿæµ‹è¯•
   â†“
3. ç¡®è®¤èƒ½æŠ“å–æ•°æ®
   â†“
4. ç‚¹å‡»"å¯¼å‡º Playwright é…ç½®"
   â†“
5. å¾—åˆ° JSON é…ç½®æ–‡ä»¶
   â†“
6. åç«¯ç›´æ¥ä½¿ç”¨é…ç½®ç”Ÿæˆ Playwright è„šæœ¬
   â†“
7. å¼€å§‹å¤§è§„æ¨¡è‡ªåŠ¨åŒ–æŠ“å–
```

**æ—¶é—´èŠ‚çœï¼š** ä» 2-3 å°æ—¶åˆ†æç½‘ç«™ â†’ **5 åˆ†é’Ÿå¯¼å‡ºé…ç½®**

---

## ğŸ“‹ å¯¼å‡ºçš„é…ç½®æ–‡ä»¶å†…å®¹

### **æ–‡ä»¶åæ ¼å¼**
```
playwright-config-{åŸŸå}-{æ—¶é—´æˆ³}.json

ç¤ºä¾‹: playwright-config-www.fangcheng.gov.cn-1730198400000.json
```

### **é…ç½®æ–‡ä»¶ç»“æ„**

```json
{
  // ========== ç½‘ç«™åŸºæœ¬ä¿¡æ¯ ==========
  "website": "www.fangcheng.gov.cn",
  "websiteName": "fangcheng",
  "url": "https://www.fangcheng.gov.cn/search/?keywords=è€•åœ°åœ°åŠ›",
  "urlPattern": "https://www.fangcheng.gov.cn/search/?keywords=è€•åœ°åœ°åŠ›",
  
  // ========== é€‰æ‹©å™¨é…ç½® ==========
  "selectors": {
    "listContainer": "#new-list",           // åˆ—è¡¨å®¹å™¨
    "listItem": "li, tr, div[class*=\"item\"]", // åˆ—è¡¨é¡¹
    "fields": {                              // å­—æ®µé€‰æ‹©å™¨
      "title": "a[href], h3, h4",
      "link": "a[href]",
      "date": ".date, .time, [class*=\"date\"]"
    }
  },
  
  // ========== åˆ†é¡µé…ç½® ==========
  "pagination": {
    "enabled": true,
    "nextButton": "a:contains(\"ä¸‹ä¸€é¡µ\"), a:contains(\"ä¸‹ä¸€\"), .next-page",
    "totalPages": "span:contains(\"å…±\"), .total-pages",
    "pageParam": "page"
  },
  
  // ========== ç­‰å¾…æ—¶é—´é…ç½® ==========
  "waitConfig": {
    "listLoad": 2000,      // åˆ—è¡¨åŠ è½½ç­‰å¾…ï¼ˆæ¯«ç§’ï¼‰
    "itemDelay": 100,      // æ¯é¡¹ä¹‹é—´å»¶è¿Ÿ
    "pageDelay": 1000      // ç¿»é¡µå»¶è¿Ÿ
  },
  
  // ========== å…ƒæ•°æ® ==========
  "metadata": {
    "testedAt": "2025-10-29T12:00:00.000Z",
    "itemsFound": 15,
    "confidence": "high",   // high/medium/low
    "scrapedBy": "Data Hunter Pro Chrome Extension",
    "version": "1.3.6"
  },
  
  // ========== ç¤ºä¾‹æ•°æ®ï¼ˆå‰3æ¡ï¼‰==========
  "sampleData": [
    {
      "title": "2023å¹´è€•åœ°åœ°åŠ›è¡¥è´´å®æ–½æ–¹æ¡ˆ",
      "href": "https://www.fangcheng.gov.cn/2023/08-19/630986.html"
    },
    // ... æ›´å¤šç¤ºä¾‹
  ],
  
  // ========== Playwright Python ä»£ç æ¨¡æ¿ ==========
  "playwrightTemplate": {
    "language": "python",
    "code": "# å®Œæ•´çš„ Python Playwright è„šæœ¬..."
  }
}
```

---

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### **1. åœ¨æ’ä»¶ä¸­æµ‹è¯•ç½‘ç«™**

1. è®¿é—®ç›®æ ‡ç½‘ç«™æœç´¢é¡µé¢
2. æ‰“å¼€ Data Hunter Pro æ’ä»¶
3. ç‚¹å‡» "Start Scraping"
4. ç¡®è®¤èƒ½æ­£ç¡®æŠ“å–æ•°æ®

### **2. å¯¼å‡ºé…ç½®**

åœ¨æ•°æ®è¡¨æ ¼ç•Œé¢ï¼Œç‚¹å‡»åº•éƒ¨çš„ï¼š

```
ğŸ­ å¯¼å‡º Playwright é…ç½®
```

### **3. ä¿å­˜é…ç½®æ–‡ä»¶**

æ–‡ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä¾‹å¦‚ï¼š
```
playwright-config-www.fangcheng.gov.cn-1730198400000.json
```

### **4. åç«¯ä½¿ç”¨é…ç½®**

#### **æ–¹æ¡ˆAï¼šç›´æ¥ä½¿ç”¨ç”Ÿæˆçš„ Python è„šæœ¬**

```python
# é…ç½®æ–‡ä»¶ä¸­åŒ…å«å®Œæ•´çš„ Python ä»£ç æ¨¡æ¿
# æå– playwrightTemplate.code å­—æ®µ
import json

with open('playwright-config-xxx.json', 'r', encoding='utf-8') as f:
    config = json.load(f)

# ä¿å­˜ä¸º Python æ–‡ä»¶
with open('scraper.py', 'w', encoding='utf-8') as f:
    f.write(config['playwrightTemplate']['code'])

# è¿è¡Œè„šæœ¬
# python scraper.py
```

#### **æ–¹æ¡ˆBï¼šé›†æˆåˆ°ç°æœ‰æŠ“å–ç³»ç»Ÿ**

```python
# åœ¨ä½ çš„åç«¯ç³»ç»Ÿä¸­
from services.crawler_service import CrawlerService

def create_crawler_from_config(config_file):
    """ä»æ’ä»¶å¯¼å‡ºçš„é…ç½®åˆ›å»ºçˆ¬è™«ä»»åŠ¡"""
    
    with open(config_file, 'r', encoding='utf-8') as f:
        config = json.load(f)
    
    # åˆ›å»ºçˆ¬è™«ä»»åŠ¡
    crawler = CrawlerService.create_task(
        website=config['website'],
        url=config['url'],
        selectors=config['selectors'],
        pagination=config['pagination'],
        wait_config=config['waitConfig']
    )
    
    return crawler

# ä½¿ç”¨
crawler = create_crawler_from_config('playwright-config-xxx.json')
crawler.start()
```

---

## ğŸ“Š **å¯¼å‡ºé…ç½®çš„ä¼˜åŠ¿**

### **å¯¹æ¯”æ‰‹åŠ¨åˆ†æ**

| ä»»åŠ¡ | æ‰‹åŠ¨åˆ†æ | ä½¿ç”¨æ’ä»¶å¯¼å‡º | èŠ‚çœæ—¶é—´ |
|------|---------|------------|---------|
| **æ‰¾åˆ—è¡¨å®¹å™¨** | 10-20åˆ†é’Ÿ | è‡ªåŠ¨è¯†åˆ« | 15åˆ†é’Ÿ |
| **æµ‹è¯•é€‰æ‹©å™¨** | 20-30åˆ†é’Ÿ | å·²éªŒè¯ | 25åˆ†é’Ÿ |
| **å†™ç¤ºä¾‹ä»£ç ** | 30-60åˆ†é’Ÿ | è‡ªåŠ¨ç”Ÿæˆ | 45åˆ†é’Ÿ |
| **æµ‹è¯•éªŒè¯** | 10-20åˆ†é’Ÿ | å·²å®Œæˆ | 15åˆ†é’Ÿ |
| **æ€»è®¡** | **1.5-2.5å°æ—¶** | **< 5åˆ†é’Ÿ** | **ğŸ¯ èŠ‚çœ 95%æ—¶é—´ï¼** |

---

## ğŸ¨ **ç”Ÿæˆçš„ Python ä»£ç ç‰¹ç‚¹**

1. **âœ… å¼€ç®±å³ç”¨** - å¯ä»¥ç›´æ¥è¿è¡Œ
2. **âœ… æ³¨é‡Šå®Œæ•´** - åŒ…å«æµ‹è¯•ä¿¡æ¯
3. **âœ… é”™è¯¯å¤„ç†** - try-except ä¿æŠ¤
4. **âœ… è¿›åº¦è¾“å‡º** - å®æ—¶æ˜¾ç¤ºæŠ“å–è¿›åº¦
5. **âœ… åˆ†é¡µæ”¯æŒ** - è‡ªåŠ¨ç¿»é¡µé€»è¾‘
6. **âœ… å»¶è¿Ÿæ§åˆ¶** - é¿å…è¯·æ±‚è¿‡å¿«

---

## ğŸ”§ **é…ç½®æ–‡ä»¶çš„ç”¨é€”**

### **1. å¿«é€Ÿå¼€å‘ Playwright è„šæœ¬**
```python
# ç›´æ¥ä½¿ç”¨ç”Ÿæˆçš„ä»£ç ï¼Œ5åˆ†é’Ÿä¸Šçº¿
```

### **2. çˆ¬è™«ä»»åŠ¡é…ç½®**
```python
# å­˜å…¥æ•°æ®åº“ï¼ŒåŠ¨æ€é…ç½®çˆ¬è™«
crawler_configs.insert(config)
```

### **3. ç½‘ç«™ç»“æ„æ–‡æ¡£**
```json
// ä½œä¸ºç½‘ç«™ç»“æ„çš„æ–‡æ¡£è®°å½•
// æ–¹ä¾¿å›¢é˜Ÿåä½œ
```

### **4. æµ‹è¯•ç”¨ä¾‹**
```python
# ç”¨ç¤ºä¾‹æ•°æ®éªŒè¯æ–°å¼€å‘çš„çˆ¬è™«
assert crawler.scrape() == config['sampleData']
```

---

## ğŸ’¡ **æœ€ä½³å®è·µ**

### **å»ºç«‹é…ç½®åº“**

```
configs/
â”œâ”€â”€ fangcheng.gov.cn.json
â”œâ”€â”€ wuyang.gov.cn.json
â”œâ”€â”€ ningling.gov.cn.json
â”œâ”€â”€ linying.gov.cn.json
â””â”€â”€ ...

â†’ åç«¯è‡ªåŠ¨åŠ è½½é…ç½®
â†’ æ”¯æŒæ•°ç™¾ä¸ªç½‘ç«™
â†’ æ— éœ€é‡å¤å¼€å‘
```

### **ç‰ˆæœ¬ç®¡ç†**

```bash
# Git ç®¡ç†é…ç½®æ–‡ä»¶
git add configs/*.json
git commit -m "æ–°å¢æ–¹åŸå¿ç½‘ç«™é…ç½®"
```

### **CI/CD é›†æˆ**

```yaml
# è‡ªåŠ¨æµ‹è¯•é…ç½®æœ‰æ•ˆæ€§
test:
  - name: Test scrapers
    run: pytest tests/test_configs.py
```

---

## ğŸ“ˆ **æ•ˆç‡æå‡è¯„ä¼°**

### **å¼€å‘æ–°ç½‘ç«™æ”¯æŒ**

```
ä¼ ç»Ÿæ–¹å¼:
1. æ‰‹åŠ¨åˆ†æç½‘ç«™ (1-2å°æ—¶)
2. å†™ Playwright ä»£ç  (1-2å°æ—¶)
3. è°ƒè¯•æµ‹è¯• (1å°æ—¶)
æ€»è®¡: 3-5å°æ—¶

ä½¿ç”¨æ’ä»¶å¯¼å‡º:
1. æ’ä»¶æµ‹è¯• (2-5åˆ†é’Ÿ)
2. å¯¼å‡ºé…ç½® (1åˆ†é’Ÿ)
3. åç«¯é›†æˆé…ç½® (5-10åˆ†é’Ÿ)
æ€»è®¡: 10-15åˆ†é’Ÿ

æ•ˆç‡æå‡: 20å€ï¼ğŸš€
```

---

## ğŸ‰ **æ€»ç»“**

è¿™ä¸ªåŠŸèƒ½è®©ä½ çš„æ’ä»¶ä»**å•çº¯çš„æ•°æ®é‡‡é›†å·¥å…·**å‡çº§ä¸º**Playwright å¼€å‘è¾…åŠ©å·¥å…·**ï¼

**æ ¸å¿ƒä»·å€¼ï¼š**
- âœ… åŠ é€Ÿæ–°ç½‘ç«™å¼€å‘
- âœ… é™ä½æŠ€æœ¯é—¨æ§›
- âœ… æé«˜ä»£ç å¤ç”¨
- âœ… å¢å¼ºç³»ç»ŸååŒ

**å»ºè®®å®šä»·æå‡ï¼š+Â¥10,000 - Â¥20,000**

å› ä¸ºè¿™ä¸åªæ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè€Œæ˜¯**å®Œæ•´å¼€å‘å·¥å…·é“¾çš„ä¸€ç¯**ï¼(ï¾‰â—•ãƒ®â—•)ï¾‰*:ï½¥ï¾Ÿâœ§

---

**ä¸‹æ¬¡å¼€å‘æ–°ç½‘ç«™æ”¯æŒæ—¶ï¼š**
1. ç”¨æ’ä»¶æµ‹è¯• 5 åˆ†é’Ÿ
2. å¯¼å‡ºé…ç½® 1 åˆ†é’Ÿ
3. åç«¯ç›´æ¥ç”¨ 5 åˆ†é’Ÿ
4. å®Œæˆï¼âœ¨

æ¯”æ‰‹åŠ¨åˆ†æå¿« **20å€ä»¥ä¸Š**ï¼

