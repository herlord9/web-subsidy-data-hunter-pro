# 环境配置说明

## API 配置文件

插件的后端 API 地址已统一配置在 `src/config/api.js` 文件中。

## 当前环境配置

### 测试环境（默认）
- **环境名称**: 测试环境
- **API 地址**: `https://test-api.example.com`
- **用途**: 日常开发和测试

### 开发环境
- **环境名称**: 开发环境 (本地)
- **API 地址**: `http://localhost:8101`
- **用途**: 本地开发调试

### 生产环境
- **环境名称**: 生产环境
- **API 地址**: `https://api.example.com`
- **用途**: 线上正式环境

## 如何切换环境

### 方法一：使用命令（推荐）
```bash
# 切换到测试环境并自动编译
npm run env:test

# 切换到开发环境并自动编译
npm run env:dev

# 切换到生产环境并自动编译
npm run env:prod
```

### 方法二：手动修改
打开 `src/config/api.js` 文件，修改 `CURRENT_ENV` 变量：

```javascript
// 当前环境
const CURRENT_ENV = ENV.TEST;  // 使用测试环境
// const CURRENT_ENV = ENV.DEVELOPMENT;  // 使用开发环境
// const CURRENT_ENV = ENV.PRODUCTION;  // 使用生产环境
```

修改后重新编译：

```bash
npm run build
```

### 重新加载插件
切换环境后，在浏览器扩展页面点击"重新加载"图标，或者重新加载 `dist` 文件夹。

## API 端点配置

所有 API 端点都在 `API_CONFIG.ENDPOINTS` 中定义：

- **登录**: `/auth/login/password`
- **刷新Token**: `/auth/refresh`
- **数据导入**: `/api/chrome-data/import`
- **检查重复**: `/api/chrome-data/check-duplicate`
- **推断地区**: `/api/chrome-data/infer-region`
- **导入统计**: `/api/chrome-data/stats/chrome-import`

## 登录界面显示

登录页面会显示当前使用的环境和 API 地址：

```
🌐 当前环境：测试环境
API: https://test-api.example.com
```

## 注意事项

1. ⚠️ 切换环境后必须在浏览器中重新加载插件
2. ⚠️ 切换环境后需要重新登录
3. ⚠️ 不同环境的用户数据是隔离的
4. 💡 插件本身不需要运行，只需要 build 后加载 dist 文件夹到浏览器
5. 💡 后端服务需要单独启动（请根据实际情况配置后端路径）

## 插件使用流程

### 1. 构建插件（默认测试环境）
```bash
cd your-project-directory
npm run build
```

### 2. 加载插件到浏览器
1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `dist` 文件夹

### 3. 使用插件
- 打开插件，输入邮箱密码登录
- 登录成功后即可使用数据抓取功能

## 常见问题

### Q: 登录失败怎么办？
A: 
1. 检查后端服务是否启动
2. 确认环境配置是否正确
3. 查看浏览器控制台的错误信息

### Q: 如何验证当前环境？
A: 打开插件登录页面，查看顶部的环境信息提示

### Q: 数据导出到哪个环境？
A: 数据会导出到当前配置的环境对应的后端API

