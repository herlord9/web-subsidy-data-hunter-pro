# 🔍 搜索关键词快捷选择功能使用说明

## ✨ 功能简介

这个功能可以在**页面右侧**创建一个**可滑动的关键词选择器**，自动识别页面上的搜索框，点击关键词后自动填充到搜索框并触发搜索。关键词列表从 JSON 配置文件加载，支持自定义。

## 📋 关键词配置

关键词列表存储在 `src/data/keywords.json` 文件中，支持自定义修改。

### 当前预定义关键词

- 耕地地力
- 惠农
- 大豆玉米带状复合种植
- 稻谷补贴
- 小麦一喷三防
- 粮食生产工作实施方案
- 粮油规模
- 农机购置
- 农机报废更新补
- 扩种油菜
- 油菜种植
- 家庭农场
- 农民合作社 培育项目
- 新型农业经营主体培育项目
- 农业经营主体能力提升
- 耕地轮作
- 深松作业补助
- 还田作业补助
- 绿色高产高效行动
- 高标准农田建设
- 农业社会化服务补助
- 农作物秸秆
- 地膜科学使用回收
- 病虫害防治
- 农业科技培训
- 农业灾害应急

### 自定义关键词

1. 编辑 `src/data/keywords.json` 文件
2. 修改 `keywords` 数组中的关键词
3. 重新构建插件：`npm run build`
4. 在浏览器中重新加载插件

## 🚀 使用步骤

### 1. 打开插件弹窗

在任意网页上点击浏览器工具栏中的 **Data Hunter Pro** 插件图标。

### 2. 点击识别按钮

在插件弹窗的顶部，点击 **"🔍 识别搜索框并添加关键词快捷选择"** 按钮。

### 3. 查看关键词选择器

- 插件会自动扫描页面上的所有搜索框
- 在页面**右侧**会出现一个**可滑动的关键词选择器**（固定在右侧，垂直居中）
- 选择器包含所有配置的关键词按钮
- 弹出提示告诉你创建成功

### 4. 使用关键词按钮

- **点击任意关键词按钮**，该关键词会自动填充到页面上找到的第一个搜索框
- **自动触发搜索**：填充后会自动点击搜索按钮（如果找到）
- **点击反馈**：点击后按钮会短暂变绿色，表示填充成功
- **鼠标悬停效果**：鼠标悬停在按钮上会有高亮效果

### 5. 滚动位置记忆

- **自动记忆**：每次点击关键词按钮后，会自动保存当前滚动位置
- **自动恢复**：下次打开选择器时（包括页面刷新后），会自动滚动到上次点击的位置
- **智能定位**：滚动位置会定位到下一个未使用的关键词，方便连续使用

## 🎨 界面特点

### 位置和样式

- **固定位置**：选择器固定在页面右侧，垂直居中
- **可滑动**：当关键词较多时，选择器可以上下滚动
- **最大高度**：选择器最大高度为 80% 视口高度，超出部分可滚动
- **美观设计**：紫色渐变按钮，圆角边框，阴影效果
- **自定义滚动条**：使用自定义样式的滚动条，更美观

### 功能按钮

- **关闭按钮**：点击右上角的 ❌ 可以关闭选择器
- **标题栏**：显示 "🔍 快速选择关键词"
- **关键词按钮**：垂直排列，每个按钮显示一个关键词

## ⚠️ 重要提示

### 自动恢复机制

**页面刷新后，关键词选择器会自动恢复**：

- 如果刷新前选择器是显示的，刷新后会自动重新创建
- 滚动位置会自动恢复到上次点击的位置
- 无需手动重新点击识别按钮

### 手动关闭

- 点击选择器右上角的 **❌** 按钮可以手动关闭
- 关闭后不会自动恢复，需要重新点击插件中的识别按钮

### 搜索框识别

插件会自动识别以下类型的搜索框：

- `<input type="text">`
- `<input type="search">`
- 包含 "search" 关键字的 input (name, class, id)
- 包含 "keyword" 关键字的 input (name)

### 自动搜索触发

- 填充关键词后，插件会自动查找并点击搜索按钮
- 支持的搜索按钮标识：
  - 包含 "搜索"、"查询"、"search" 等文本的按钮
  - `type="submit"` 的按钮
  - 包含搜索相关 class/id 的按钮

## 💡 使用场景

特别适合需要在政府网站、农业补贴网站等页面频繁搜索相关关键词的场景：

1. **访问政府网站搜索页面**
2. **打开插件，点击识别按钮** - 在右侧创建关键词选择器
3. **依次点击关键词按钮** - 自动填充并搜索
4. **抓取搜索结果数据** - 使用插件的数据抓取功能
5. **继续下一个关键词** - 选择器会记住位置，方便连续使用
6. **刷新页面** - 选择器会自动恢复，无需重新操作

## 🛠 技术细节

### 关键词加载

- **JSON 文件**：从 `src/data/keywords.json` 加载关键词列表
- **后备方案**：如果 JSON 文件加载失败，使用代码中的默认关键词
- **动态加载**：每次创建选择器时重新加载，支持热更新

### 滚动位置保存

- **存储位置**：使用 `chrome.storage.local` 保存滚动索引
- **保存时机**：每次点击关键词按钮后保存下一个关键词的索引
- **恢复时机**：选择器创建时自动恢复滚动位置
- **定位方式**：使用 `scrollIntoView` 平滑滚动到目标位置

### 样式隔离

- **内联样式**：使用内联样式，不受页面 CSS 影响
- **高 z-index**：`z-index: 999999`，确保选择器始终显示在最上层
- **独立滚动**：选择器内部滚动不影响页面滚动

### 事件处理

- **事件触发**：填充后会触发 input 和 change 事件
- **避免重复**：已添加选择器的页面不会重复添加
- **事件隔离**：选择器内的点击事件不会影响页面其他元素

## 📸 视觉效果

关键词选择器包含：

- 📌 **标题栏**："🔍 快速选择关键词" + 关闭按钮
- 🎨 **紫色渐变按钮**：每个关键词一个按钮
- ✨ **鼠标悬停动画效果**：按钮高亮
- ✅ **点击后变绿色反馈**：1秒后恢复原色
- 📜 **自定义滚动条**：紫色滚动条，更美观
- 🔄 **平滑滚动**：恢复位置时使用平滑滚动动画

## 🔄 版本信息

- **版本**: 1.3.6
- **更新日期**: 2025-01-27
- **功能特点**:
  - ✅ 右侧固定位置
  - ✅ 可滑动设计
  - ✅ 滚动位置记忆
  - ✅ 自动恢复功能
  - ✅ JSON 配置文件
  - ✅ 自动搜索触发

---

**享受更高效的数据搜索体验！** (◕‿◕✿)
